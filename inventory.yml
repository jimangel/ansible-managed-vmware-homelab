---
all:
  hosts:
     nuc-1:
       ansible_host: IP-ESXI-1
     nuc-2:
       ansible_host: IP-ESXI-2
     nuc-3:
       ansible_host: IP-ESXI-3
  children:
    esxi:
      hosts:
        nuc-1: {}
        nuc-2: {}
        nuc-3: {}
      vars:
        # only required for limited direct SSH / Ansible modules generally for bootstraping hosts
        # without it, it runs but errors about the lack of python on esxi hosts
        ansible_python_interpreter: /bin/python
  
  # GLOBAL VARS
  vars:
    ansible_user: root
    ansible_connection: ssh

    # only needed for the initial bootstrapping (it's used to SCP files to ESXi hosts)
    ansible_ssh_private_key_file: "/Users/me/.ssh/id_rsa_vmware"

    # TODO: move / make private
    esxi_license: "XXXX-XXXX-XXXX-XXXX-XXXX"
    vcenter_license: "XXXX-XXXX-XXXX-XXXX-XXXX"

    # used for vDS configuration to match hosts ESXi
    vsphere_version: "7.0.3"

    vcenter_hostname: "IP-VCENTER"
    vcenter_username: "administrator@vsphere.mydns.dog"
    vcenter_password: "VMwadminPW!99"
    # (optional) used for ensuring the VCSA is on in `99-power-on-vcsa-vm.yml`
    vcenter_esxi_host: "172.16.6.101"

    esxi_username: "root"
    esxi_password: "esxir00tPW!"

    folder_name: "anthos_vms"
    resource_pool_name: "anthos_pool"

    datacenter_name: "anthos-dc"
    cluster_name: "anthos-cluster"

    ## NETWORKING

    # USB NIC driver fling (https://flings.vmware.com/usb-network-native-driver-for-esxi) - what file?
    source_usb_driver_zip: "/Users/me/Downloads/ESXi703-VMKUSB-NIC-FLING-55634242-component-19849370.zip"
    # Where to copy it on each host / install?
    dest_usb_driver_zip: "/tmp/ESXi703-VMKUSB-NIC-FLING-55634242-component-19849370.zip"

    # Uplinks (ensure these match what you have! `esxcli network nic list`)
    physical_nic_1: "vmnic0"
    physical_nic_2: "vusb0" 
    
    # !! vmk0 is taken by mgmt by default
    # Set vmk_vmotion for vmk creation
    vmk_vmotion: "vmk1"
    # vmk_storage is used for creation and iSCSI binding
    vmk_storage: "vmk2"

    # Networking config for 2 switches with 1 uplink / NIC each (2 per host).
    ops_dvs_switch_name: "Operation-VDS"

    # VM Traffic switch.
    vm_dvs_switch_name: "VM-VDS"

    # Storage - this is the iSCSI discovery IP. Ansible appends :3260
    send_target_address: "172.16.4.100"
    # This defaults to vmhba64 and most likely doesn't need to change.
    # Confirm with: esxcli iscsi adapter list
    vmhba_name: "vmhba64"

    # nfs server details
    nfs_server_ip: "192.168.7.19"
    nfs_volume_path: "vmware"
    # nfs or nfs41 - I found nfs41 to have issues on reboot due to file locking
    nfs_datastore_type: "nfs"
    nfs_datastore_name: "toaster"
